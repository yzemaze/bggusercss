/* ==UserStyle==
@name           BGG UI Customizer
@description    Easy customization of BGG's UI with user.css
@namespace      https://github.com/yzemaze/bggusercss/
@supportURL     https://www.boardgamegeek.com/thread/2009167/bgg-ui-customizer-colors-fonts-dark-theme-hide-con
@version        0.13.12
@author         yzemaze
@license        CC-BY-NC 4.0
@preprocessor stylus

== theme ==
@var    checkbox    theme               '3 color theme'                         1
@var    color       color1              'Color 1 (header)'                      #3f3a60
@var    color       color2              'Color 2 (background)'                  #ededee
@var    color       color3              'Color 3 (links)'                       #005bca

== specials ==
@var    select      logo                'Logo'                                  ["default*", "BGG", "Ernie"]
@var    checkbox    userMenuLeft        'User menu on the left'                 0
@var    checkbox    searchBarLeft       'Search bar left of menus'              0
@var    checkbox    siteSelectorHide    'Hide site selector'                    0
@var    checkbox    editHomepageHide    '… subdomain dropdown / edit homepage'  0
@var    checkbox    announcementHide    '… announcements'                       0
@var    checkbox    contestHide         '… contests'                            0
@var    checkbox    geekpreviewHide     '… geekpreviews (GenCon, Essen etc.)'   0
@var    checkbox    skyscraperHide      '… skyscraper ad'                       0
@var    range       pageWidth           'Max width of page'                     [1550,770,3840,10,"px"]

== front page ==
@var    range       columns             'Front page columns'                    [2,2,5,1]
@var    checkbox    frontpageCondensed  '… less whitespace'                     1
@var    color       fp2nBgColor         '… background of even rows'             #ddd
@var    color       fp2n1BgColor        '… background of odd rows'              #ccc
@var    checkbox    fpBorder            '… row borders'                         0
@var    color       fpBorderColor       '… row border-color'                    #bbb
@var    color       fpLinkColor         '… links'                               #222
@var    color       fpLinkVisitedColor  '… links visited'                       #666
@var    select      fpLinkWeight        '… link weight'                         ["bold", "bolder", "lighter", "normal*"]
@var    color       metadataColor       'Post metadata'                         #666
@var    checkbox    metadataInline      '… inline'                              1
@var    checkbox    titleTruncation     '… truncate titles'                     1
@var    checkbox    metadataForumHide   '… hide subforum/blog'                  1
@var    checkbox    metadataAuthorHide  '… hide author'                         0
@var    checkbox    metadataReactionsHide   '… hide reactions'                  0
@var    checkbox    quickbarSticky      'Quickbar etc. sticky'                  1

== fonts ==
@var    range       fontSize            "Font size text"                        [14,6,36,1,"px"]
@var    select      bodyFont            "… body text"                           ["initial", "monospace", "proportional", "sans-serif", "serif", "Proxima-Nova*", "Roboto"]
@var    select      headerFont          "… header, buttons, small text …"       ["initial", "monospace", "proportional", "sans-serif", "serif", "Proxima-Nova*", "Roboto"]

==  background & border colors ==
@var    color       headerBgColor       'Header background'                     #3f3a60
@var    color       bodyBgColor         'Body background'                       #aaa
@var    color       contentBgColor      'Content background'                    #bbb
@var    color       moduleBgColor       'Module background'                     #ccc
@var    color       moduleBorderColor   '… border'                              #999
@var    color       menuBgColor         'Menus, dropdowns etc. background'      #ddd
@var    color       menuBorderColor     '… border'                              #ccc
@var    color       inputBgColor        'Input background'                      #eee
@var    color       inputBorderColor    '… border'                              #999
@var    color       table2nBgColor      'Tables even rows'                      #ddd
@var    color       table2n1BgColor     '… odd rows'                            #ccc

== text colors ==
@var    color       textColor           'Text'                                  #222
@var    color       linkColor           'Links'                                 #0053b7
@var    color       linkHoverColor      '… hover'                               #c5130e
@var    color       linkSelectedColor   '… selected'                            #fdad2f
@var    color       linkVisitedColor    '… visited'                             #666
@var    select      linkUnderlineStyle  '… underline style'             ["dashed","dotted","double","initial","inherit","none*","solid","wavy"]
@var    color       buttonPrimaryBgColor 'Buttons: primary'                     #005bca
@var    color       buttonStdBgColor    '… standard'                            #fff
@var    color       buttonSubtleBgColor '… subtle'                              #e9e9ec
@var    color       buttonHoverBgColor  '… hover'                               #ff5100
@var    color       positiveColor       'Positive values'                       #01ac01
@var    color       alarmColor          'Negative values, errors'       #ff5100

== game pages ==
@var    color       gamepageHeaderColor 'Game pages: header text'               #ddd
@var    checkbox    promotedVideoHide   '… hide promoted videos'                0
@var    checkbox    recommendationsHide '… hide recommendations "Fans Also Like"'   0

== geeklists, forum ==
@var    color       articleNewColor     'Article/item new border'               #CE6C6D
@var    color       articleSelectedColor    '… selected border'                 #000AFF

== subscriptions ==
@var    checkbox    nextAlways          'Subscriptions display NEXT when empty' 0
@var    checkbox    nextChange          '… change next new sub icon'            0
@var    text        nextIconUnicode     '… icon (unicode)'                      138         
@var    color       nextIconColor       '… icon'                                #01ac01
@var    range       nextIconSize        '… size'                                [1.5,1,6,0.25,"em"]
==/UserStyle== */

/* ===== FUNCTIONS ===== */
bg(item, args...)
    background-color item + "BgColor" args
    
c(item, args...)
    color item + "Color" args

cc(bgColor)
    if dark(bgColor)
        color #fff
    else
        color #000
    
redish(col)
    if hue(col) < 40deg || hue(col) > 320deg
        1
    else
        0

buttonHoverStyle()
    bg buttonHover
    border-color buttonHoverBgColor
    border-radius buttonHoverRadius
    c buttonHover

headerHoverStyle()
    bg headerHover
    border-color headerHoverBgColor
    border-radius headerHoverRadius
    c headerHover

headerStyle()
    bg header
    c header

inputStyle()
    bg input
    border inputBorder
    border-radius borderRadius
    textStyle()

if linkUnderlineStyle != "none"
    linkStyle()
        text-decoration underline linkUnderlineStyle
else
    linkStyle()
        text-decoration none

menuHoverStyle()
    headerHoverStyle()
    // buttonHoverStyle()
    
textStyle()
    c text
/* ===== /functions ===== */

/* ===== THEME ===== */
if theme
    headerBgColor       = color1
    bodyBgColor         = color2
    linkColor           = color3
    
    if dark(bodyBgColor)
        same = darken
        diff = lighten
    else
        same = lighten
        diff = darken
        
    buttonStdBgColor    = diff(bodyBgColor, 15%)
    buttonSubtleBgColor = diff(bodyBgColor, 13%)
    contentBgColor      = diff(bodyBgColor, 5%)
    fp2nBgColor         = same(contentBgColor, 15%)
    fp2n1BgColor        = diff(contentBgColor, 5%)
    fpBorderColor       = diff(bodyBgColor, 10%)
    fpLinkColor         = diff(bodyBgColor, 95%)
    fpLinkVisitedColor  = same(fpLinkColor, 50%)
    moduleBgColor       = diff(bodyBgColor, 10%)
    moduleBorderColor   = diff(bodyBgColor, 20%)
    textColor           = diff(bodyBgColor, 95%)
    metadataColor       = same(textColor, 20%)
        
    if redish(contentBgColor)
        alarmColor      = #0000ff
        dangerColor     = #0051ff
    else
        alarmColor      = #ff0000
        dangerColor     = #ff5100

    inputBgColor        = contentBgColor
    inputBorderColor    = moduleBorderColor
    menuBgColor         = moduleBgColor
    menuBorderColor     = moduleBorderColor
    linkHoverColor      = mix(linkColor, textColor)
    linkSelectedColor   = dangerColor
    linkVisitedColor    = mix(linkColor, linkHoverColor)
    articleNewColor     = linkHoverColor
    articleSelectedColor = linkColor
    buttonHoverBgColor  = linkHoverColor
    buttonPrimaryBgColor = linkColor
    table2nBgColor      = fp2nBgColor
    table2n1BgColor     = fp2n1BgColor
    textMutedColor      = metadataColor
/* ===== /theme ===== */

/* ===== VARS ===== */
articleNewBorder = solid 3px articleNewColor
articleSelectedBorder = solid 3px articleSelectedColor

if redish(headerBgColor)
    badgeColor      = #0051ff
else
    badgeColor      = #ff5100

borderRadius = 2px
buttonBgColor = menuBgColor
buttonBorderColor = menuBorderColor

if dark(buttonHoverBgColor)
    buttonHoverColor = #fff
else
    buttonHoverColor = #000
    
buttonHoverRadius = borderRadius
for font in Proxima-Nova Roboto
    if bodyFont == font
        bodyFont = bodyFont, sans-serif
    if headerFont == font
        headerFont = headerFont, sans-serif
fontS = fontM = fontXL = fontXXL = headerFont
fontL = bodyFont
fontSizeXXL = 1.5rem
fontSizeXL = 1.2rem
fontSizeL = 0.875rem // == fontSize set in config
fontSizeM = 0.75rem
fontSizeS = 0.625rem

if fpBorder
    fpBorder = 1px solid fpBorderColor
    
if dark(headerBgColor)
    headerColor         = lighten(headerBgColor, 85)
    headerHoverBgColor  = lighten(headerBgColor, 50)
    headerHoverColor    = darken(headerColor, 90)
    headerLinkColor     = #fff
else
    headerColor         = darken(headerBgColor, 85)
    headerHoverBgColor  = darken(headerBgColor, 50)
    headerHoverColor    = lighten(headerColor, 90)
    headerLinkColor     = #000
    
headerHoverRadius = borderRadius
inputBorder = 1px solid inputBorderColor
menuBorder = 1px solid menuBorderColor
menuHoverColor = buttonHoverColor
moduleBorder = 1px solid moduleBorderColor

if dark(moduleBgColor)
    quoteBgColor        = lighten(moduleBgColor, 10)
    quoteColor          = darken(textColor, 5)
else
    quoteBgColor        = darken(moduleBgColor, 5)
    quoteColor          = lighten(textColor, 5)
    
quoteTitleBgColor = headerBgColor
quoteTitleColor = headerColor
quoteBorder = moduleBorder
/* ===== /vars ===== */ 
@-moz-document domain("boardgamegeek.com"), domain("bgg.cc"), domain("rpggeek.com"), domain("videogamegeek.com")
    html
        font-family headerFont
        font-size round((fontSize/0.875)) // body text = 0.875rem 
    body
        bg body
        textStyle()
        font-family headerFont
        font-size 0.875rem

    /* ===== NEW PAGES ===== */
    /* === page === */
    .container-fluid
        max-width pageWidth
    if skyscraperHide
        .global-body-ad
            display none
            
    /* === menus === */
    /* dropdowns */
    .dropdown-menu
        bg menu
        border-color menuBorderColor
        a, li a, .dropdown-item a, .dropdown-item a:link, .dropdown-item a:visited, &.show a.dropdown-item, &.show .dropdown-item, li.dropdown-option > button, li > button.btn
            textStyle()
            &:hover, &:visited:hover
                menuHoverStyle()
                linkStyle()
        li.dropdown-option.active
            button::before, a::before
                c linkSelected
    /* modal dialogs */
    div.modal-content
        bg module
        .list-group-item
            bg menu
    /* popover */
    .popover, .popover-body
        bg menu
        &, button.close
            c text
        .dropdown-item
            c text
            &:hover
                c linkHover
        .reaction-list
            &::before, &::after
                background-image: none
    /* overlay */
    .expandable div.expandable-envelope p.expandable-overlay
        background-image linear-gradient(to bottom, rgba(255, 255, 255, 0), contentBgColor)
        
    /* === text === */
    p, textarea
        textStyle()
        font-family bodyFont
    .text-muted, .help-block
        c textMuted
        &:hover
            c text
    label
        c text
        
    /* === links, buttons === */
    a, button, .link-muted-color
        outline none !important
    a, .link-muted-color
        &:hover
            c linkHover
            linkStyle()
    a, .nav-tabs-more-dropdown a, .panel-body-toolbar > a, .advertisement-text-body a, .btn.btn-text-link, .btn.btn-link, .btn.btn-text-link.active, .quickbar-pagination button.btn, .panel-inline-links > a:link:not(.btn), .global-footer-item a, .quickbar-icon, .shortcut-add, .shortcut-remove
        c link
        linkStyle()
    a:visited:not(.btn)
        c linkVisited
    .summary-image-item .summary-item-title a
        &, &:link, &:visited
            c link
            linkStyle()
            &:hover
                c linkHover
                linkStyle()
    .link-text, .link-text-color, a.toggler-caret
        &, &:link, &:visited
            textStyle()
            &:hover
                c linkHover
                linkStyle()
    .link-muted-color
        &, &:link, &:visited
            c textMuted
            &:hover
                c linkHover
                linkStyle()
    a.selected
        c linkSelected
    a:hover, .outline.outline-muted a:hover:not(.btn)
        c linkHover
    a, a:link, .btn-link
        &, &:hover
            linkStyle()
    .btn-primary
        bg buttonPrimary
        border-color buttonPrimaryBgColor
        cc(buttonPrimaryBgColor)
    .btn.btn-white, .btn.btn-default
        &, &:not(.active):not(:disabled)
            bg buttonStd
            border-color buttonStdBgColor
            cc(buttonStdBgColor)
    .btn-subtle
        bg buttonSubtle
        border-color buttonSubtleBgColor
        cc(buttonSubtleBgColor)
    .btn:not(,btn-empty), .btn-outline-secondary, .btn.btn-secondary, input[type="button"], .btn.btn-link
        &:hover
            buttonHoverStyle()
    .btn-success
        background-color positiveColor
        border-color positiveColor
    .btn-warning
        background-color dangerColor
        border-color dangerColor
    .btn-danger
        background-color alarmColor
        border-color alarmColor     
    .btn-success, .btn-warning, .btn-danger
        &:hover, &:focus, &:active, &.active, .open .dropdown-toggle&
            buttonHoverStyle()
            
    .btn-subtle, .btn.btn-default:not(.active):not(:disabled), .btn.btn-default:not(.active):not(:disabled).is-active, .btn.btn-white:not(.active):not(:disabled), .btn.btn-white:not(.active):not(:disabled).is-active
        &:hover
            buttonHoverStyle()
            i
                c buttonHover
            
    /* === inputs, forms === */
    input:not([type="button"]), .form-control, textarea, textarea.form-control[readonly]
        inputStyle()
        &:focus
            bg input
            
    /* === navigation === */
    .nav.nav-tabs 
        > li > a, > li.active > a, .nav-link
            textStyle()
            &:hover
                bg buttonHover
                border-radius buttonHoverRadius
                c buttonHover   
            
    /* === misc === */
    hr
        border-color moduleBorderColor
    hr+br
        display none
    /* ===== /new pages ===== */

    /* ===== ANGULAR8 PAGES ===== */
    /* ==== header, file, image & video pages ==== */
    gg-app
        /* ==== header ==== */
        gg-header

            /* === logo === */
            if logo == "Ernie"
                div.menu-logo-inner
                    margin-left 1em
                    a > img
                        width 60px
                        height 45px
                        box-sizing border-box
                        padding-left 60px
                        background url("https://cf.geekdo-static.com/images/geekdo/bgg_cornerlogo.png")
                        background-size contain             

            if logo == "BGG"
                div.menu-logo-inner
                    a > img
                        display none
                     
                    a:first-child:after         
                        content "BGG"
                        c header // #ff5100 
                        font fontXXL
                        font-size 36px
                        font-weight 900             
                gg-menu-logo div.dropdown
                    margin-bottom 15px          

            if siteSelectorHide
                gg-menu-logo div.menu-logo-inner > div.dropdown > button.dropdown-toggle
                    display none !important
                    
            /* === order of menu items === */
            if userMenuLeft
                div.c-nav-primary-wrapper >
                    div.c-nav-primary
                        margin-left 20px
                        order 2
                    div.c-nav-primary-user
                        flex 0
                        margin-left 20px
                        order 1
                /* open user menu to the right */
                div.c-nav-primary-user .dropdown-menu
                    left 217px !important // counter inline transform 
                    right auto !important
            if searchBarLeft
                div.c-inner
                    button
                        order 0
                    gg-menu-logo
                        order 1
                    gg-header-search
                        order 2
                        margin-left 20px
                    div.c-nav
                        order 3
                        div.c-nav-primary div.dropdown-menu.show
                            left auto !important
                            right 0 !important                  
            /* nextAlways doesn’t work */

            /* === colors === */
            > header.header > .container-fluid
                headerStyle()

            /* === sidebar toggle === */
            div.c-inner button.btn.btn-empty.header-icon
                border-radius headerHoverRadius
                padding 0.5em
                path
                    fill headerColor
                &:hover
                    bg headerHover 
                    path
                        fill headerHoverColor
                        
            /* === site selector === */
            gg-menu-logo .menu-logo-inner > .dropdown 
                > button.dropdown-toggle[aria-haspopup="true"]
                    c header !important
                    border-radius headerHoverRadius
                    padding 0.4em 0.5em
                    &:hover
                        headerHoverStyle()
                        c headerHover !important // c-i!
                .dropdown-header
                    textStyle()
                    
            /* === search === */
            .c-advanced
                bg menu
                textStyle()
                a, select.custom-select
                    c text
                    &:hover
                        menuHoverStyle()
                select.custom-select
                    bg menu
            .c-inner gg-header-search.c-mobile
                headerStyle()           

            /* === geekmail === */
            gg-geekmail-notifications
                border-radius headerHoverRadius
                padding 0.35em 0em
                path
                    fill headerColor
                &:hover
                    bg headerHover
                    path
                        fill headerHoverColor
                        
            /* === subscriptions === */
            gg-subscription-notifications
                a.geekmenu-notification-icon
                    border-radius headerHoverRadius
                    margin-left 0
                    padding 0.35em
                    path
                        fill headerColor
                    span.count
                        transform translate(-5px, 5px)
                    &:hover
                        bg headerHover
                        padding 0.35em
                        path
                            fill headerHoverColor                               
                /* next button */
                a.header-user-notification-next
                    border none
                    border-radius headerHoverRadius
                    c header
                    font-size fontSizeM
                    font-weight 700
                    margin-left 0
                    padding 0.7em 0.3em
                    &:hover
                        headerHoverStyle()
                        path
                            fill headerHoverColor
            
            /* == count badges == */
            .geekmail-notification-icon, .geekmenu-notification-icon span.count
                background-color badgeColor
                if dark(badgeColor)
                    color white
                else
                    color black
                            
            /* === user + menus === */
            li.c-nav-user.dropdown-primary button.dropdown-toggle, div.c-nav-primary-wrapper li.dropdown-primary button.dropdown-toggle
                c header
                border-radius headerHoverRadius
                padding 0.5em
                &:hover, &[aria-expanded="true"]
                    headerHoverStyle()
            /* fix for Angular8 header dropdowns to extend hover range */ // TODO remove
            .dropdown-menu .dropdown-item a
                padding 0.25em 1em
                margin -0.25em -1em
        /* ==== /header ==== */

        /* ==== sidebar ==== */
        if quickbarSticky
            .geeksidebar
                position sticky
                top 70px
        .geeksidebar-section
            .geeksidebar-section-header.toggler-caret
                headerStyle()
                &:hover
                    headerHoverStyle()
            .geeksidebar-section-body
                bg module
                padding 0.2em 0
                .geeksidebar-links
                    a
                        c text
                    > li:not(:last-child)
                        border-color bodyBgColor
                .btn, .quickbar-pagination .btn, .quickbar-header .color-icon 
                    c link
                    &:hover
                        c text
                .quickbar-header .quickbar-pagination .btn.is-active
                    c text
                /* row hover */
                div.quickbar-header
                    padding 0 0.5em
                .quickbar-list li
                    min-height 1.7em
                li
                    padding 0.15em 0.5em
                li:hover, li a:hover
                    menuHoverStyle()
                    fa-icon:hover
                        c menuHover
                    
        /* ==== body ==== */
        .global-body-content, .global-body-content-primary
            bg content
            gg-markup-text
                font-family bodyFont
            
            /* === buttons === */
            .btn-icon, .form-group-search button.search
                c link
            .btn:hover
                buttonHoverStyle()
            .feedback-trigger
                border-radius buttonHoverRadius
            /* thumbs button */     
            .interaction-btn.thumbsup:hover path#thumbsup-outline
                fill positiveColor
            /* geekgold button */
            gg-geekgold gg-reactions-popup-trigger gg-button-geekgold
                .interaction-btn.geekgold:hover path
                    &#coin-background
                        fill #fde538
                    &#coin-outline
                        fill #a37900                
                gg-geekgold-quick-give.dropdown-menu.show
                    bg menu
                    button.dropdown-item:hover
                        headerHoverStyle()
            /* thumbs count */
            .interaction-btn-group .interaction-btn, ul.comment-count
                &, span.count
                    c text
            /* comment buttons */
            ul.comment-actions > li button.comment-btn
                border-radius buttonHoverRadius
                c text
                &.active, &:focus, &:hover
                    buttonHoverStyle()
            /* edit buttons */
            .btn-unstyled:hover
                c linkHover
                    
            /* === input === */
            input, textarea, .form-control, textarea.form-control[readonly]
                inputStyle()

            /* === image pages, gallery, file pages, video pages === */
            /* == header == */
            .breadcrumb-row gg-breadcrumbs.c-light-bg
                bg module
                margin 0 // fix different margins 
                > span.c-crumb:first-of-type
                    padding-left 1em            
            .c-container,  gg-image-nav .image-nav, gg-comment
                bg module
                .popover
                    bg menu !important
            .c-container
                border moduleBorder !important
            gg-markup-quote
                bg quote !important
                border quoteBorder !important
                margin 10px 0
                padding 10px
            .breadcrumb-row .c-light-bg
                .c-crumb:first-of-type, .c-crumb
                    a
                        c link
                        &:hover
                            buttonHoverStyle()
                            margin -2px -4px
                            padding 2px 4px             
            gg-image-nav
                border-color moduleBorderColor
                .image-nav .c-control 
                    .ng-fa-icon
                        c link
                    &:hover .ng-fa-icon
                        c linkHover
                .image-metadata
                    c textMuted
                    bg module
                    &:hover
                        textStyle()             
            gg-filepage-caption
                .caption-user
                    c textMuted
                .filepage-metadata
                    border-color moduleBorderColor
                    gg-license-editable
                        c textMuted
                        bg module !important
                        &:hover
                            textStyle()         
            .caption-block
                .caption-header .user-info
                    c textMuted
                .gallery-meta a.edit-btn:hover fa-icon.ng-fa-icon
                    c linkHover
            .media-sidebar
                bg module
                border moduleBorder
                .media-sidebar-actions
                    border-color moduleBorderColor
                    gg-subscription-button, gg-image-size-dropdown, gg-share-buttons
                        .btn
                            border none !important // c-i!
                            textStyle()
                            fa-icon.ng-fa-icon
                                textStyle()
                            &:hover
                                buttonHoverStyle()
                                border-radius buttonHoverRadius !important
                                fa-icon.ng-fa-icon
                                    c buttonHover
                            &.dropdown-toggle.btn-right fa-icon.ng-fa-icon
                                border none
                a, button
                    &.btn-tag
                        background-color buttonBgColor
                        textStyle()
                        &:hover
                            buttonHoverStyle()
                a.dropdown:hover fa-icon.ng-fa-icon
                     c linkHover
                a.see-all-btn
                    c textMuted
                    padding 3px 5px
                    &:hover
                        buttonHoverStyle()
                .tag-link-wrapper button.btn-unstyled
                    c link
                    &:hover
                        buttonHoverStyle()
                        margin -3px -5px
                        padding 3px 5px
                        text-decoration none
            /* button specials … */
            gg-filepage-page, gg-video-page
                .media-sidebar .media-sidebar-actions
                    gg-subscription-button .subscription-btn
                        .btn-block.btn-left
                            margin 0 0.7em 0 1.5em
                            padding 0 1em 0 0 !important // c-i!
                        .btn-right.dropdown-toggle
                            margin 0 0.3em 0 0.3em
                            padding 0 0 0 0.6em !important // c-i!
                            fa-icon.ng-fa-icon
                                border none
                    gg-share-buttons .btn
                        margin 0 3em 0 3em
                        padding 0 0 0 0.6em !important // c-i!
                        
            /* == interaction, file timeline == */
            .caption-footer .interaction-btn-group .interaction-btn
                bg button
                border-color buttonBorderColor
                &:hover
                    c linkHover
            gg-timeline
                bg module
                margin-top 20px
                padding 15px 10px 0 0
                gg-timeline-item 
                    .timeline-item > .timeline-time > .time
                        c textMuted
                    .timeline-data
                        border-color moduleBorderColor
                        gg-file + gg-file
                            border-color moduleBorderColor                  
                        a:hover .file-badge, a:not(.loading) .file-badge:hover
                            buttonHoverStyle()
                        .timeline-meta
                            c textMuted
            .view-all-container
                border-color moduleBorderColor
                &::before
                    box-shadow none
            gg-comments-block .panel
                button.flex-grow-1
                    bg menu
                gg-comment
                    border moduleBorder
                    margin 0.5em 0
                    padding 1em
                    gg-reactions-popup-trigger a
                        padding 4px 8px
                        &:hover
                            buttonHoverStyle()
                            .count, .label
                                c buttonHover
                    .user-info
                        c textMuted
                    &.c-targeted
                        border articleSelectedBorder
                    &.c-theme-subscription
                        border articleNewBorder
                gg-comment-form
                    .c-guidelines
                        c textMuted
        /* ==== /body ==== */
                
        /* ==== footer ==== */
        div.global-body-content-secondary .geekfooter .geekfooter-item a
            c text
            &:hover
                c linkHover
    /* ===== /angular8 pages ===== */

    /* ===== ANGULARJS PAGES ===== */
    body.ng-scope
        .btn-indigo
            headerStyle()
            border-color headerBgColor
            
        /* ==== header ==== */
        .global-header

            /* === logo === */
            if logo == "Ernie"
                div.global-header-logo
                    margin-left 1em
                    a > img
                        width 60px
                        height 45px
                        box-sizing border-box
                        padding-left 60px
                        background url("https://cf.geekdo-static.com/images/geekdo/bgg_cornerlogo.png")
                        background-size contain
            if logo == "BGG"
                div.global-header-logo
                    a > img
                        display none
                     
                    a:first-child:after         
                        content "BGG"
                        c header // #ff5100 
                        font fontXXL
                        font-size 36px
                        font-weight 900
                    div.dropdown
                        top -8px

            /* === order of menu items === */
            if userMenuLeft
                ul.global-header-nav-primary >
                    for i in (1..6)
                        li:nth-child({i})
                            order 2 + i
                    li:nth-child(1)
                        margin-left 20px
                    li:nth-child(7)
                        order 1
                        margin-left 20px
                    li:nth-child(8)
                        order 2
                /* open menus to the left */
                ul.global-header-nav-primary .dropdown-menu
                    left auto
                    right 0
                /* open user menu to the right */
                li.global-header-nav-user .dropdown-menu
                    left 0
            if searchBarLeft
                div.global-header-nav-primary-wrapper
                    order 2
                div.global-header-nav-search
                    margin-left 20px
                    order 1
                div.global-header-nav-search-advanced ul.dropdown-menu
                    left 0 !important
            if nextAlways
                a.global-header-user-notification-action.ng-hide
                    display initial !important

            /* fix AngularJS header */
            /* TODO remove */
            .global-header-nav-primary .dropdown-menu li a
                c text
                &:hover
                    menuHoverStyle()
                    linkStyle()

            /* === colors === */
            headerStyle()
            .global-header-nav-primary .dropdown-toggle, .global-header-nav-primary button.btn, geekmail-notifications a.global-header-icon, subscription-notifications span a, button.global-header-nav-toggle, button.global-header-site-selector, a.global-header-icon.is-active i, button.btn.global-header-icon.is-active i, .btn.btn-empty.global-header-icon.global-header-nav-toggle
                c header !important // c-i!
                &:hover, &[aria-expanded="true"], &:focus
                    headerHoverStyle()
                    c headerHover !important // override c-i!
            .btn.btn-empty.global-header-icon.global-header-nav-toggle
                path
                    fill headerColor
                &:hover path
                    fill headerHoverColor           
            button.btn.global-header-site-selector
                border-radius headerHoverRadius     
                padding 7px 9px

            /* === search === */
            .global-header-nav-search
                .global-header-nav-search-inner
                    bg menu
                .global-header-nav-search-advanced
                    bg menu
                    span.btn, a
                        bg menu
                        c text
                        &:hover
                            menuHoverStyle()

            /* === geekmail === */
            geekmail-notifications a.global-header-icon
                border-radius headerHoverRadius
                padding 4px 7px
            subscription-notifications span a.global-header-icon
                border-radius headerHoverRadius
                padding 5px 7px 3px 7px
            a.global-header-icon span.badge, button.btn.global-header-icon span.badge
                background-color badgeColor
                if dark(badgeColor)
                    color white
                else
                    color black
                
            /* === NEXT button === */
            a.global-header-user-notification-action
                border none
                border-radius headerHoverRadius
                padding 3px 5px
                font-family fontM !important
                font-size fontSizeM !important
                font-weight 700
            .ui-select-bootstrap .ui-select-choices-row.active > a
                headerStyle()
            if siteSelectorHide
                button.global-header-site-selector
                    display none

        /* ==== body ==== */
        .global-body-content, footer.global-footer
            bg content

        .summary-item-tag a, .summary-item-pagination.pagination > li > a, .summary-item-pagination.pagination > li > span, .summary-file-type a
            textStyle()
        .global-header-nav-search-advanced a:hover
            bg module

        /* === front page === */
        /* == columns == */
        @media screen and (min-width:769px)
            if columns != 2
                .geekcentral_leftcol
                    flex 1 1 (100/columns)%
                    max-width (100/columns)%
                .geekcentral_rightcol
                    flex 1 1 (100 - 100/columns)%
                    max-width (100 - 100/columns)%
                    column-count (columns - 1)
                    column-gap 10px
                .geekcentral_rightcol > .geekcentral_module
                    break-inside avoid
        .global-body-content-primary
            bg content
        ul.geekcentral-controls
            bg module
            border moduleBorder
        if frontpageCondensed
            .media-cell
                padding 2px 4px 2px 4px
            .media-cell__subtitle
                margin 0px 0 0 0

        /* == metadata == */
        .media-cell
            border fpBorder
            border-top none
        .media-header
            headerStyle()
        h1.media-header__title, .media-module .dropdown .dropdown-toggle, .module-pager .module-pager__arrow, .module-pager 
            c header
        .post-meta
            overflow visible

        if metadataInline
            if not titleTruncation
                .media-cell
                    overflow auto
                h2.media-cell__title, p.media-cell__subtitle
                    display inline
                    line-height fontSizeL
                p.media-cell__subtitle
                    margin 3px 0 0 5px
                .post-meta, .post-reactions
                    float right
            if titleTruncation
                .media-cell
                    display flex
                    justify-content space-between
                p.media-cell__subtitle
                    align-self flex-end
                    margin-left 5px
        else 
            .media-cell__subtitle
                display flex
                flex-wrap wrap
                > span::after
                    margin-right 0.3em
        if metadataForumHide
            .geekcentral_module span.post-meta__item:nth-last-child(3)
                display none
                ::after
                    display none
        if metadataAuthorHide
            .geekcentral_module span.post-meta__item:nth-last-child(2)
                display none
                ::after
                    display none
        if metadataReactionsHide
            .geekcentral_module span.post-reactions, .geekcentral_module span.post-meta__item:nth-last-child(2)::after
                display:none

        /* == zebra striped modules == */
        .geekcentral
            .media-module
                .media-cell:nth-child(2n)
                    bg fp2n
                .media-cell:nth-child(2n+1)
                    bg fp2n1

        /* === sidebar === */
        if quickbarSticky
            .global-body-content-container .global-secondary-nav
                position sticky
                top 72px
        .global-secondary-nav-section
            ul.global-secondary-nav-links a
                c text
            .global-secondary-nav-section-header.toggler-caret
                headerStyle()
                &:hover
                    headerHoverStyle()
            .toggler-caret-target, .geeksidebar-section-body
                padding 0.2em 0
                bg module
            ul.global-secondary-nav-links > li
                border-color bodyBgColor
            .quickbar-list-group
                margin-bottom -5px
            .quickbar-pagination button.btn:hover, a:hover .quickbar-icon, .quickbar-header .quickbar-pagination button.btn.btn-empty.is-active
                c text
            /* row hover */
            div.quickbar-header
                padding 0 0.5em
            .quickbar-list li
                min-height 1.7em
            li
                padding 0.15em 0.5em
            li, .shortcut-add, .shortcut-remove
                a, &
                    &:hover
                        menuHoverStyle()
        
        /* === hidden modules === */
        if editHomepageHide
            .geekcentral-controls
                display none
        if announcementHide
            .geekcentral_module.leftcol:nth-child(2)
                display none
        if contestHide
            .geekcentral_module.leftcol:nth-child(3)
                display none
        if geekpreviewHide
            .geekcentral_module > center > a[href*="/geekpreview"]
                display none
            .geekcentral_module.rightcol:nth-child(-n+3)
                margin-bottom 0px
                #dfp-medrect-reserved-home, #dfp-medrect
                    display none

        /* === panels === */
        .panel-default > .panel-heading, .panel-primary > .panel-heading
            headerStyle()
            border moduleBorder

        /* === fonts === */
        /* AngularJS only, Angular 8 rem */
        .game-header-title-info h1
            font-family fontXXL     
            font-size fontSizeXXL       
        h2, .panel-header-lg .panel-title, .navbar-brand
            font-family fontXL      
            font-size fontSizeXL        
        h3, h5, .h5, .btn.btn-sm, .btn-group-sm > .btn, .global-header-nav-primary .dropdown-toggle, .global-header-nav-primary button.btn, .global-header-nav-primary a.btn, .global-header-site-selector, .global-header-nav-primary .dropdown-menu li a, .form-control, .game-year, .game-header-title-summary, .credits ul li, .rating-stars-title, .gameplay-item-primary, .quotetitle, .quote, .geekcentral-controls__item, h2.media-cell__title, .nav.nav-tabs > li > a, .game-marketplace, .summary-video-item > div, ul.list-block-border > li > a
            font-size fontSizeL
        h4, .panel-header-sm .panel-title, .fs-responsive-sm, .game-classification, .summary-item-description > *, .summary-item-counts > *, .summary-item-meta, .summary-item-meta > *, .summary-item-actions > *, .summary-item-actions-below > *, .global-footer p, .condition-label, .pagination-sm > li > a, .pagination-sm > li > span, .badge, a.tag, .avatarblock, p.media-cell__subtitle, .quickbar-header button.btn, .quickbar-icon, ul.global-secondary-nav-links > li, .game-header-flags, .gameplay-item-secondary, .game-itemid, .btn-xs, .btn-group-xs > .btn, button.global-header-user-notification-action
            font-family fontM
            font-size fontSizeM
        .global-secondary-nav-section-header, .global-secondary-nav-section-header.toggler-caret, .hotness-item-title, .text-domain, .summary-item-tag a, .summary-media-grid-count, .summary-item-pagination.pagination > li > a, .summary-item-pagination.pagination > li > span, .summary-file .summary-file-type a
            font-family fontS
            font-size fontSizeS
        .glyphicon
            font-family "Glyphicons Halflings"

        /* === text-colors === */
        h1, h2, h3, h4, h5, h6, p, .dropdown-header, .panel-heading, .text-muted, .summary-sale-item-price
            textStyle()

        /* === front page modules & links === */
        .geekcentral-controls
            button, .link-text-color
                c fpLink
                &.btn.btn-empty:hover
                    c linkHover             
            .dropdown-menu > li > button.btn:hover
                menuHoverStyle()
                c menuHover !important
        
        /* == modules == */
        .geekcentral_module
            .link-text-color, .link-text-color:link, .quickbar a.ng-binding
                c fpLink
            .link-text:visited
                c text
            .link-text-color:visited
                c fpLinkVisited
            .link-text:link, ul.global-secondary-nav-links a, .link-text-color, .link-text-color:link, .quickbar a.ng-binding, a.post-meta__link
                &:hover
                    c linkHover
            .link-text-color, .link-text-color:link, a.ng-binding, li.ng-binding a
                font-weight fpLinkWeight
            a.post-meta__link, a.post-meta__link:visited, .post-meta .post-reactions
                c metadata

            /* buttons & dropdowns */
            .media-module
                .dropdown
                    .dropdown-toggle
                        c header !important // c-i!
                        &:hover, &[aria-expanded="true"]
                            headerHoverStyle()
                            c headerHover !important // c-i!
                            margin -4px
                            padding 4px
                            
                    /* dropdown menus */
                    .dropdown-menu > li > button.btn
                        c text
                        &:hover
                            menuHoverStyle()
                .module-pager .module-pager__arrow:not(.disabled):hover
                    headerHoverStyle()
                    margin 5px
                    padding 5px
                .media-filters
                    headerStyle()
                    .media-link
                        c headerLink !important
                        padding 5px
                        &:hover
                            headerHoverStyle()
                            c headerHover !important // c-i!
                .media-grid
                    border-color moduleBorderColor
        /* === /front page modules & links === */

        /* === zebra striped tables === */
        table.salesreport tr.odd, .table-striped tr:nth-child(2n), .table-condensed tr:nth-child(2n), div.wrapper tr:nth-child(2n), .collection_table > tbody > tr:nth-child(2n), tr[bgcolor="#FFFFFF"]
            bg table2n !important
        table.salesreport tr.even, .table-striped tr:nth-child(2n+1), .table-striped > tbody > tr:nth-child(2n+1) > th, .table-striped > tbody > tr:nth-child(2n+1) > td , .table-condensed tr:nth-child(2n+1), div.wrapper tr:nth-child(2n+1), .collection_table > tbody > tr:nth-child(2n+1), tr[bgcolor="#ECEDEE"]
            bg table2n1

        /* === geekmarket === */
        div[ng-controller="GeekMarketCtrl"]
            .white-bg
                bg module
            .border-bottom
                border-color moduleBorderColor !important //c-i!
            nav.navbar-static-side li.active, .panel-primary, .dropdown-menu
                bg menu
            nav.navbar-static-side li > a
                c text
                &:hover
                    menuHoverStyle()
            nav.navbar-static-side li.active > a
                c linkSelected
                &:hover
                    menuHoverStyle()
            .nav.navbar-top-links > li > a:hover
                menuHoverStyle()
            .navbar-minimalize, .nav.navbar-right > li > a
                c text
                &:hover
                    c menuHover !important // c-i!
            .nav-second-level
                bg menu
                c menu
            .table-bordered tbody tr td, .table-bordered tbody tr th, .dropdown-menu
                border menuBorder
            div.panel-heading
                border none
            div#confirm div.modal-header
                headerStyle()
                border none
            a .badge 
                &:hover
                    bg buttonHover
                    c buttonHover
            .label
                padding 3px 5px             
                &.label-default
                    bg buttonStd
                    cc buttonStdBgColor
            .img-rounded + .label.label-default
                left 9px !important
                

        /* === game pages === */
        /* == hidden modules == */
        if promotedVideoHide
            promotedvideos-module
                display none
        if recommendationsHide
            reviews-module + div.panel
                display none
                
        /* == mobile == */
        @media (max-width:767px)
            .game-header-body
                background-color #0a090f
                
        /* == header == */
        .game-header, .game-header-flags a:not(.btn):link, .game-header-title-info h1 a:not(.btn):link, .game-header-title-info h1 a:not(.btn):visited, .game-header-title-info h1 a:not(.btn):hover, .game-header-title-info h1 a:not(.btn):focus, .game-year, .game-header-title a:not(.btn):link, .gameplay-item-primary, .gameplay-item .btn:not(.btn-empty), .game-header-credits a:not(.btn):link, .game-header-credits a.ng-binding, .game-header-credits .credits-cta.ng-scope a, .gameplay-item .glyphicon.glyphicon-question-sign
            c gamepageHeader
        .game-header-title-rating a.rating-angular
            color #ddd !important
            
        /* == hover colors == */
        .btn-primary:hover
            buttonHoverStyle()
        .btn-white:hover
            border-color buttonHoverBgColor !important // c-i!
        .game-header-flags, .game-header-title .game-header-title-summary, .game-header-credits .credits-cta.ng-scope
            a:hover
                buttonHoverStyle()
                c buttonHover !important
        .gameplay-item .btn:not(.btn-empty):hover
            buttonHoverStyle()
        .gameplay-item .glyphicon.glyphicon-question-sign, .feature-title span.glyphicon, .feature-title [class^="fi-"], .feature-description, .feature-description [class^="fi-"], .feature-description span.glyphicon, a.btn.btn-xs.outline-item-icon i.fi-torsos-female-male, .feature-icon, .btn-empty.text-muted
            c textMuted
            &:hover
                c linkHover
        a i.fi-pencil.c-icon
            c textMuted !important // c-i!
            &:hover
                c linkHover !important // c-i!
            
        /* == navigation == */
        .game-nav-tabs
            bg content
            .nav.nav-tabs > li.active > a
                border-color alarmColor
        div.nav-tabs-more-dropdown
            a
                padding-left 5px
            a:hover
                /* padding-left 10px*/
                menuHoverStyle()
                c headerHover !important
        .well
            bg module
        .summary-border .summary-item
            border-color menuBorderColor
            
        /* == overview, images == */
        .summary-media-grid-count
            bg menu
            border menuBorder
            a
                c link
                &:hover 
                    c buttonHover
            &:hover
                buttonHoverStyle()
                
        /* === sections === */
        .wiki_angular h2, .wiki_angular h3
            c textMuted
        .panel-header-lg, .panel-header-sm
            border-color moduleBorderColor
            .panel-title 
                c textMuted
                > a:link, > a:visited
                    c link
                    &:hover
                        c linkHover 
                
        /* == zebra style == */
        ul.summary > li.summary-item
            &:nth-child(2n)
                bg table2n
            &:nth-child(2n+1)
                bg table2n1
            &:last-child
                border-bottom none
                
        /* == table margin/padding == */
        ul.summary > li.summary-item    
            margin-bottom 0
            padding-top 0.2em
            padding-right 0.2em
        .summary-callout-lg .summary-item
            padding-left 7em
                
        /* == description == */
        .game-awards.panel li a, .panel-expandable .expandable-body a
            &:link
                border-bottom none
                c link
                linkStyle()
            &:hover
                c linkHover
        .text-domain
            c textMuted !important // c-i!
            &:hover
                c linkHover !important // c-i!
        .game-itemid
            c textMuted
            
        /* == buy a copy == */
        ul.summary-sale > li.summary-sale-item
            padding 0.2em 0.5em
            margin-bottom 0 !important // c-i!
            
        /* == geekmarket == */
        .panel-inline-links > a:link:not(.btn):hover
            c linkHover
            
        /* == videos, reviews == */
        .summary-item-meta, .summary-item-section.text-muted
            c textMuted
            a
                c textMuted
                &:hover
                    c linkHover     
            .summary-item-tag a:hover
                buttonHoverStyle()
        .summary-item-counts-item
            c textMuted
        .summary-item-counts:hover .summary-item-counts-item
            c linkHover
            
        /* == forum == */
        /* navigation */
        ul.nav.nav-pills
            > li
                textStyle()
                &.active > a
                    &, .glyphicon-chevron-right
                        c linkSelected
                > a:hover, > a:hover .glyphicon-chevron-right
                    c linkHover
                > a .nav-pills-count
                    textStyle()
            li.nav-header
                textStyle()
            > li > a
                textStyle()
        .panel-header-actions > span >
            a:not(.btn), a.is-active
                c link
                &:hover
                    c linkHover !important // c-i!
            a.is-active
                c linkSelected
        /* pagination */
        .pagination > li
            &:not(.disabled) > a
                bg buttonStd
                cc(buttonStdBgColor)
                &:hover
                    buttonHoverStyle()
            &.active > a
                bg buttonSubtle
                c linkSelected
                font-weight 700
            &.disabled > a
                c textMuted
                background-color transparent
        /* threads */
        forum-threads
            bg module
            ul.summary
                > li.summary-item:nth-child(2n)
                    bg table2n
                    > a
                        bg table2n
                    ul.pagination a, ul.pagination span, .summary-item-tag a
                        bg table2n1
                        border-radius 2px
                > li.summary-item:nth-child(2n+1)
                    bg table2n1
                    > a
                        bg table2n1
                    ul.pagination a, ul.pagination span, .summary-item-tag a
                        bg table2n
                        border-radius 2px
                .summary-item-counts:hover .summary-item-counts-item
                    c linkHover
                .summary-item-title a:visited
                    c linkVisited
                ul.summary-item-pagination.pagination > li > a
                    &:link              
                        c link
                    &:visited
                        c linkVisited
                    &:hover
                        buttonHoverStyle()
                li.summary-item .summary-item-meta > .summary-item-tag > a
                    &:hover
                        buttonHoverStyle()
                        
        /* == files == */
        .summary-file-type a:hover
            buttonHoverStyle()
            
        /* == my games == */
        .summary-collection-group
            border none
        .form-private
            bg menu
        .panel-header-actions .dropdown-menu a
            c text
            &:hover
                menuHoverStyle()
            
        /* == more == */
        ul.list-block-border > li
            border-color moduleBorderColor
            padding 0 0.5em
            &:nth-child(2n)
                bg table2n
            &:nth-child(2n+1)
                bg table2n1
        .game-more > li > a::after
            c link
            
        /* == geeklists == */
        .summary-item-geeklist
            border-color moduleBorderColor
            &:hover
                border-color linkHoverColor
                .summary-item-title
                    c linkHover

        /* === geekpreview === */
        .geekpreview-header, .geekpreview-header-info, .geekpreview-header h1
            c gamepageHeader
            p, .text-muted
                c gamepageHeader !important
        .geekpreview-sticky-menu
            headerStyle()
        .geekpreview-toolbar-primary-search form input.form-control
            inputStyle()
        .geekpreview-item-inner-info-header-title h3 span, dl.geekpreview-item-inline-summary dt, .geekpreview-item-publisher
            textStyle()
            a
                c link
        div.geekpreview-item-inner-info-header p.text-muted a
            c link
        .geekpreview-parent
            headerStyle()
            border none
        .geekpreview-parent-info h2 a, .geekpreview-parent-social .btn, .geekpreview-parent-info a
            c headerLink
        .c-green-600
            c positive !important

        /* === modal dialog === */
        .modal .modal-dialog
            .modal-header
                headerStyle()
                border none
                button.close:hover
                    c badge
                .modal-title, button.close
                    c header
            .modal-body, .modal-footer
                bg module
                ul.list-group .list-group-item
                    bg menu
            .modal-footer
                border-top moduleBorder
            .panel-title
                textStyle()
        
        /* === mobile === */
        .has-mobile-nav
            .global-header-nav-primary-wrapper
                bg body
                ul.global-header-nav-primary
                    bg module
                    textStyle()
                    button.btn
                        textStyle() !important
                li.dropdown
                    border-color moduleBorderColor
            .global-secondary-nav-section-header
                headerStyle()
        div.global-header-nav-mobile-links button.global-header-icon
            c header
    /* ===== /angularjs pages ===== */

    /* ===== LEGACY PAGES ===== */
    .legacy
        bg content
        textStyle()
        textarea
            textStyle()
        
        /* === modules === */
        div#modules
            #leftmodules, #rightmodules
                bg module
                &, & *
                    border-color moduleBorderColor !important // c-inline
                .handle
                    bg header
                    c header
                .innermodule
                    bg menu
                    c menu

        .moduletable th, .bggstore_widget_controls, .geekcollection_pager, .menu_noquickbar_bottom, .hotitems th, .bg-red th, .bg-blue th, .profile_table th, .menu_table, .tabOn, .tabOff, .geekmail_header, div.recommendbox_str, .searchbox_header
            headerStyle()
        .moduletable
            border moduleBorder
        .pages a
            border-color headerColor
        .pages a:hover, .pages a:active
            border-color linkHoverColor
        .module_title, td.module_title + td > div a, td.modulecommands + td > div, td.modulecommands + td > div > a, .moduletable th a, .moduletable div.pages, .moduletable > tbody > tr:first-child, .moduletable .modulecommands, .modulecommands select, .modulecommands option, div.pages
            c header
        .moduletable th a.selected
            &, &.visited
                c badge
            
        /* === forum === */
        .forum_index_table th a
            c headerLink !important
        .forum_table th, .forum_index_table th
            c header
        .forum_table td, .forum_index_table td
            textStyle()
            bg module
            border-color moduleBorderColor
        .forum_table, .forum_index_table
            border-spacing 0
            border moduleBorder
            tr:nth-child(2n), tr:nth-child(2n) > td
                bg table2n
            tr:nth-child(2n+1), tr:nth-child(2n+1) > td
                bg table2n1
        /* border fix */
        /*.forum_table
            background-color moduleBorderColor
        */
        .moduletable
            border-spacing 0
            border moduleBorder
            tr.moduleRow:nth-child(2n)
                bg table2n
            tr.moduleRow:nth-child(2n+1)
                bg table2n1
                
        /* === quickbar edit === */
        form[action="/quickbar.php"]
            .forum_table tr:nth-child(2n), .forum_table tr:nth-child(2n) > td
                bg table2n !important
            .forum_table tr:nth-child(2n+1), .forum_table tr:nth-child(2n+1) > td
                bg table2n1 !important
        .infobox, .messagebox, .geekpoll, .popupbox, .bluebox, .whitebox, button, input, optgroup, select
            textStyle()
        div.article dl
            border-color moduleBorderColor
        div.article dd.right, div.article dd.doubleright, div.article dd.commands, div.article dd.doublecommands
            border-left moduleBorder
        div.article dd.left
            border-right moduleBorder
        /* right border fix */
        div.recommendbox_str
            width 104px
        ul.commands li.divider
            background-color moduleBorderColor
        .post_numcomments, .dull, .darkgray, div.header
            c textMuted
        div.article.subbed
            border articleNewBorder
        div.article.selected, div.article.subbed_selected
            border articleSelectedBorder
        .quotetitle
            bg quoteTitle
            c quoteTitle
        .quote
            bg quote
            border quoteBorder
            border-top none
            c quote

        /* === links === */
        a, a:link, .nav > li > a, .bluebox a
            c link
            &:hover
                c linkHover
                transition none
            &.comment_button:hover
                buttonHoverStyle()
        .geeksub_minorlink a
            &:link, &:visited
                c text
                &:hover
                    c linkHover
        .menutab-open li a:hover, .geeksub_minorlink a:active
            c linkHover
        .comment_button
            border-color linkColor
            background-color buttonBgColor
            &:hover
                buttonHoverStyle()
        a, a:link
            linkStyle()
        .forumlink, .objectlink
            a:visited, a:link, a:hover, a:active
                textStyle()
        .disambiguatedlink
            a:visited, a:link, a:hover, a:active
                c link
                linkStyle()
                &:hover
                    c linkHover
        .modulecommands > a, .moduletable th a.selected
            &:hover
                headerHoverStyle()
                
        /* === overtext / popup === */
        .location, js-location, .js-badgeovertext, .avatarovertext
            bg menu
            textStyle()
            
        /* === text color === */
        .error, text-danger
            c alarm
        .positive, .positive a, .storepositive, .storeprice, .price, .text-success
            c positive
            
        /* === fonts === */
        div.recommend_block dl.recommend *, .post_day
            font-family fontXXL !important
            font-size fontSizeXXL !important
        h1, .module_title, .profile_title, .gallery_title, span[style*="20px"], .geeklist_item_title, .post_month, .forum_path, .lf, table.lf td, div.recommend_block dl.recommend dt.tippersbig a
            font-family fontXL !important
            font-size fontSizeXL !important
        .moduletable th, .innermoduletable th, .itemmoduletable th, .innermoduletable td, #container, textarea, select, input, .geekinput, .table, .post_year, .mf, table.mf td, .quotetitle, .quote
            font-family fontL !important
            font-size fontSizeL !important
        .objectlink > a, .forumlink > a, .modulecommands, .pager, .sf, table.sf td, .post_numcomments, .smallerfont, .tabOn, .tabOff, .geekmail_header, .gm_date, .collection_table td, .owned, .wanted, .fortrade, .wishlist, .prevowned, .wanttoplay, .rating span, .ratingtext, #blog_description, .post_categories ul li, .post_nlinks ul li, .dropdown-header, .geekinput_medium, div.wikitoc, a.tag, .avatarblock
            font-family fontM !important
            font-size fontSizeM !important
        .geekpages, .pages, .comment_button, .comment_button_disabled, .gallery_caption, .tagbar-inner, .post_author, .post_controls, .post_tstamp, div[style*="9pt"], div.recommendbox_str
            font-family fontS !important
            font-size fontSizeS !important
            
        /* === backgrounds === */
        .mainmenutabs, .menu_login, .menu_quickbar, .profile_block, table#collectionitems, div.global-body-content > div, div.header , div.article, .blog_post, .bluebox
            bg module
        .messagebox, .popupbox, .infobox, .whitebox, div.recommend_block, div.wikitoc, .img-thumbnail, .menutab-open, .mainmenutabs li a.open, .submenutabs li a.open, .post_numcomments, .post_nlinks ul li a, div.geeksub_pulldown_body
            bg menu
        .menu_login,  .messagebox, .popupbox, .infobox, .whitebox, .bluebox, .errorbox, .warningbox, .greenbox, div.header, div.recommend_block, div.article, div.comment_toolbar, .post_numcomments, .post_categories ul li a, .post_nlinks ul li a, div.geeksub_pulldown_body
            border menuBorder
            
        /* === input, select === */
        input:not([type="button"]), .geekinput, .geekinput_medium, .geekinput_large, select
            inputStyle()
        input[type="button"], input[type="submit"], .geekinput
            border-radius buttonHoverRadius
            font-size fontSizeL !important
            font-weight 600
            bg button
            &:hover
                buttonHoverStyle()
        .post_numcomments::after, .post_numcomments::before
            border-color transparent moduleBorderColor
            border-right-color moduleBorderColor
        if light(textColor)
            .forum_table td.sf a > img
                background-color #fff
        /* === geeklists === */
        .geeklist_title, .geeklist_item_title
            headerStyle()
            a
                c headerLink
                &:hover
                    c linkHover
        .comment_toolbar
            headerStyle()
            .comment_button
                c link
                &:hover
                    headerHoverStyle()
        .geeklist_title, .blog_post
            border moduleBorder
        .geeklist_item_title
            border-color moduleBorderColor
        #header
            border-top menuBorder
        .infobox
            bg module
            border moduleBorder
        .recspy_box
            bg menu
            .recspy_header
                bg header
                c header
                a
                    c header
                    &:hover
                        headerHoverStyle()
            
        /* === geekmail === */
        tr:first-child > td.sf > div.sf, .gm_controlbar, div#pager.geekpages, div#mychecks
            bg module !important
            border moduleBorder !important
        table.gm_messages:nth-child(2n) tr
            bg table2n1 !important
        table.gm_messages:nth-child(2n+1) tr
            bg table2n !important
        div#mychecks > table > tbody > tr
            border 0px !important
            border-color moduleBorderColor
        td.sf div[style*="background-color"]
            bg body !important
            
        /* === polls === */
        .outerpoll
            bg module   
        .geekpoll
            th
                headerStyle()
            tr th.questiontext
                background-color transparent
                background-image none
                textStyle()
            th.header, tfoot > tr, tr.columnlabel, th.questiontext
                bg menu !important
            tr:nth-child(2n) 
                bg table2n
            tr:nth-child(2n+1) 
                bg table2n1
        .pollresults
            th, tfoot > tr > * 
                bg menu !important
            tr:nth-child(2n) td
                bg table2n
            tr:nth-child(2n+1) td
                bg table2n1
                
        /* === blog === */
        #blog_header, #blog_nav h2
            headerStyle()
        #blog_title a
            c headerLink
        #blog_nav > div > *:nth-child(2)
            textStyle()
            bg module
            border moduleBorder
            
        /* === user profile === */
        .tabOn
            headerHoverStyle()
        .tabOff a:link, .profile_title a 
            c headerLink
        .tabOff, .tabOn
            a
                padding 4px 10px
            a:hover
                headerHoverStyle()
        .tabOn a:link
                headerHoverStyle()
                c headerHover !important
                linkStyle()
        .profile_block
            textStyle()
        div.profile_title
            headerStyle()
            padding-left 5px
            
        /* === collection === */
        .collectionfilter_commandbar
            headerStyle()
        .collectionfilter_body
            bg menu
        .geekcollection_pager
            a
                c headerLink
                &:hover
                    headerHoverStyle()
            #pageset_top, .geekinput
                &:hover
                    headerHoverStyle()
        table.collection_table > tbody > tr:first-child
            headerStyle()
            th 
                c header
                a
                    c headerLink
                    &:hover
                        headerHoverStyle()
                        c headerHover !important
        #collectionitems
            .rating
                color #000
        .collection_table td
            padding 2px
        .collection_version
            white-space normal
        .editfield:hover
            menuHoverStyle()
            
        /* === subscription icon === */
        if nextChange       
            img.i_silk_newspaper_go_gray, img.i_silk_newspaper_go
                display none
            .subsicon::after
                c nextIcon
                content "\f" + nextIconUnicode
                font-family FontAwesome
                font-size nextIconSize
            /* scale old icon
            .subsicon > img
                transform:scale(1.5)
            */
            
        /* === tags === */
        div.tagouter
            bg module
            
        /* === plays === */
        table.forum_table > tbody > tr > th
            &, & *
                headerStyle()
            a
                c headerLink !important // counter-i
                padding 1px 3px
                &:hover
                    headerHoverStyle()
                    c headerHover !important // c-i!
        form[action="/geekplay.php"] .forum_table td
            border none
        /* === wiki === */
        .wiki .forum_table th
            bg header
            c header
        /* === thumbs === */
        dt.recs, dt.recsbig, .positive
            c positive
            > a
                c positive